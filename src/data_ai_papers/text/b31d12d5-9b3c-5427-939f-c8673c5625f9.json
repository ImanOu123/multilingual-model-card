{"title": "Hybrid Keyword Search Auctions *", "authors": "Ashish Goel; Kamesh Munagala", "pub_date": "2018-10-29", "abstract": "Search auctions have become a dominant source of revenue generation on the Internet. Such auctions have typically used per-click bidding and pricing. We propose the use of hybrid auctions where an advertiser can make a per-impression as well as a per-click bid, and the auctioneer then chooses one of the two as the pricing mechanism. We assume that the advertiser and the auctioneer both have separate beliefs (called priors) on the click-probability of an advertisement. We first prove that the hybrid auction is truthful, assuming that the advertisers are risk-neutral. We then show that this auction is superior to the existing per-click auction in multiple ways: 1. We show that risk-seeking advertisers will choose only a per-impression bid whereas riskaverse advertisers will choose only a per-click bid, and argue that both kind of advertisers arise naturally. Hence, the ability to bid in a hybrid fashion is important to account for the risk characteristics of the advertisers. 2. For obscure keywords, the auctioneer is unlikely to have a very sharp prior on the clickprobabilities. In such situations, we show that having the extra information from the advertisers in the form of a per-impression bid can result in significantly higher revenue. 3. An advertiser who believes that its click-probability is much higher than the auctioneer's estimate can use per-impression bids to correct the auctioneer's prior without incurring any extra cost.", "sections": [{"heading": "", "text": "4. The hybrid auction can allow the advertiser and auctioneer to implement complex dynamic programming strategies to deal with the uncertainty in the click-probability using the same basic auction. The per-click and per-impression bidding schemes can only be used to implement two extreme cases of these strategies.\nAs Internet commerce matures, we need more sophisticated pricing models to exploit all the information held by each of the participants. We believe that hybrid auctions could be an important step in this direction. The hybrid auction easily extends to multiple slots, and is also applicable to scenarios where the hybrid bidding is per-impression and per-action (i.e. CPM and CPA), or per-click and per-action (i.e. CPC and CPA).", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Introduction", "text": "While search engines had a transformational effect on Internet use and indeed, on human interaction, it was only with the advent of keyword auctions that these search engines became commercially viable. Most of the major search engines display advertisements along with search results; the revenue from these advertisements drives much of the innovation that occurs in search in particular, and Internet applications in general. Cost-per-click (CPC) auctions have evolved to be the dominant means by which such advertisements are sold [11]. An advertiser places a bid on a specific keyword or keyword group. The auctioneer (i.e. the search engine) maintains an estimate of the click-through probability (CTR) of each advertiser for each keyword. When a user searches for a keyword, the first advertising spot is sold to the advertiser which has the highest product of the bid and the CTR; in the event that this advertisement is clicked upon by the user, this advertiser is charged the minimum bid it would have to make to retain its position. The same process is repeated for the next slot, and so on. A full description of the tremendous amount of work related to keyword auctions is beyond the scope of this paper; the reader is referred to the excellent survey by Lahaie et al [6]. Two other alternatives to CPC auctions are widely used:\n1. CPM, or Cost Per (thousand) Impressions: The publisher charges the advertiser for every instance of an advertisement shown to a user, regardless of the click. This is widely used to sell banner advertisements.\n2. CPA, or Cost Per Action (also known as Cost Per Acquisition): The publisher charges the advertiser when an actual sale happens. This is widely used in associate programs such as the ones run by Amazon, and by lead generation intermediaries.\nThe three models are equivalent when precise estimates of the click-through-probability and click-to-sale-conversion probability are known. In the absence of such estimates, CPC has emerged as a good way of informally dividing the risk between the auctioneer and the advertiser: the auctioneer is vulnerable only to uncertainty in its own estimates of CTR, whereas the advertiser is vulnerable only to uncertainty in its own estimates of the click-to-sale-conversion probability, assuming its advertisement gets displayed in a favorable spot. A great deal of effort has gone into obtaining good predictions of the CTR. The problem is made harder by the fact that many keywords are searched for only a few times, and typical CTRs are low. Advertisers often want to also bid by customer demographics, which further exacerbates the sparsity of the data. Hence, there has to be a great reliance on predictive models of user behavior and new ads (e.g. see [10]). Arguably, another approach would to devise pricing models that explicitly take the uncertainty of the CTR estimates into account, and allow advertisers and auctioneers to jointly optimize over this uncertainty. In general, we believe that as Internet commerce matures, we need not just better estimation and learning algorithms but also more sophisticated pricing models to exploit all the information held by each of the participants.\nIn this paper, we propose the use of hybrid auctions for search keywords where an advertiser can make a per-impression as well as a per-click bid, and the auctioneer then chooses one of the two as the pricing mechanism. Informally, the per-impression bids can be thought of as an additional signal which indicates the advertiser's belief of the CTR. This signal may be quite valuable when the keyword is obscure, when the advertiser is aggregating data from multiple publishers or has a good predictive model based on domain knowledge, and when the advertiser is willing to pay a higher amount in order to perform internal experiments/keyword-selection. We assume that the advertiser and the auctioneer both have separate beliefs (called priors) on the click-probability of an advertisement.", "publication_ref": ["b10", "b5", "b9"], "figure_ref": [], "table_ref": []}, {"heading": "Our results", "text": "We describe the hybrid auction in section 2, where we also outline the strategic model (that of discounted rewards) used by the auctioneer and the advertiser. We introduce the multi-armed bandit problem as it occurs naturally in this context. Our results, which we have already described at a high level in the abstract, are split into two parts.\nMyopic advertisers. We first study (section 3) the case of myopic advertisers, which only optimize the expected profit at the current step. When these advertisers are risk-neutral, we show that truthtelling is a strongly dominant strategy: the advertiser bids the expected profit from an impression as a per-impression bid, and the value it expects from a click as the per-click bid, regardless of the auctioneer's prior or optimization strategy. Further, if the advertiser is certain about its CTR, and if this CTR is drawn from the auctioneer's prior which follows the natural Beta distribution (defined later), then the worst case loss in revenue of the auctioneer over pure per-click bidding is at most 1/e \u2248 37%. In contrast, the revenue-loss for the auctioneer when he uses the per-click scheme as opposed to the hybrid auction can approach 100% for a fairly natural scenario, one that corresponds to obscure keywords. We finally consider risk taking behavior of the advertisers when they are not certain about their CTR. We show that per-click bidding is dominant when the advertisers are risk-averse, but per-impression bidding is desirable when they are risk-seeking. Thus, the hybrid auction 1. Naturally extends the truthfulness of the single-slot per-click bidding auctions currently in use, for the case of myopic, risk-neutral advertisers (which is the situation under which the properties of the per-click auction are typically analyzed [11,4,1,8]).", "publication_ref": ["b10", "b3", "b0", "b7"], "figure_ref": [], "table_ref": []}, {"heading": "2.", "text": "Results in bounded possible revenue loss but unbounded possible revenue gain for the auctioneer in the natural setting of risk-neutral, myopic advertisers, and where the auctioneer uses the Gittins index. The revenue gain occurs in the common setting of obscure keywords.\n3. Naturally takes the risk posture of the advertiser into account, which neither per-click nor perimpression bidding could have done on its own (both risk averse and risk seeking advertisers occur naturally).\nThe result bounding the possible revenue loss of the auctioneer under the hybrid auction is for an arbitrary discount factor used by the auctioneer; the results about the possible revenue gain and the risk posture assume a myopic auctioneer. We believe these are the most appropriate assumptions, since we want to provide bounds on the revenue loss using hybrid auctions under the most general scenario, and want to illustrate the benefits of using the hybrid auction under natural, non-pathological scenarios.\nSemi-myopic advertisers. In section 4, we remove the assumption that the advertisers are only optimizing some function of the profit at the current step. We generalize to the case where the advertisers optimize revenue over a time-horizon. We develop a tractable model for the advertisers, and show a simple dominant strategy for the advertisers, based on what we call the bidding index. Though this strategy does not have a closed form in general, we show that in many natural cases (detailed later), it reduces to a natural pure per-click or pure per-impression strategy that is socially optimal. Thus, our hybrid auctions are flexible enough to allow the auctioneer and the advertiser to implement complex dynamic programming strategies collaboratively, under a wide range of scenarios. Neither per-impression nor per-click bidding can exhaustively mimic the bidding index in these natural scenarios. Finally, we show a simple bidding strategy for a certain (i.e. well-informed) advertiser to make the auctioneer's prior converge to the true CTR, while incurring no extra cost for the advertiser; per-click bidding would have resulted in the advertiser incurring a large cost. This is our final argument in support of hybrid auctions, and may be the most convincing from an advertiser's point of view.\nWe explain throughout the paper why the scenarios we consider are not arbitrarily chosen, but are quite natural (indeed, we believe the most natural ones) to analyze. In the process, we obtain many interesting properties of the hybrid auction, which are described in the technical sections once we have the benefit of additional notation.\nMultiple Slots. The main focus of the paper is analyzing the properties of the hybrid scheme on a single ad slot. However, the auction itself can be easily generalized to multiple slots in two different ways; before describing these, we need to note that the hybrid auction assigns an \"effective bid\" to each advertiser based on the per-impression bid, the per-click bid, and the expected CTR or quality measure. The first generalization is akin to the widely used generalized second price auction [4,11] (also referred to as the \"next-price\" auction [1]) for CPC-only bidding: the advertisers are ranked in decreasing order of effective bids, and the \"effective charge\" made to each advertiser is the effective bid of the next advertiser. We do not discuss this variant in the rest of this paper, since the computation methodology is no different from single slot auctions. Note that we can not expect this multi-slot generalization of the hybrid auction to be truthful because even the CPC-only nextprice auction is not truthful [11,4,1]. However, given the immense popularity of the next-price auction, we believe that this generalization of the hybrid auction is the most likely to be used in real-life settings.\nThe second generalization mirrors VCG [4] (or equivalently, a laddered CPC auction [1]). This generalization assumes that the CTR is multiplicatively separable into a position dependent term and an advertiser dependent term, and under this assumption, guarantees truthfulness (on both the per-impression and per-click bids) for myopic, risk-neutral advertisers. Details of this auction are in section 6. The proof follows by extending the proof of theorem 3.1 exactly along the lines of [1] and is omitted.\nThe hybrid auction is also applicable to scenarios where the hybrid bidding is per-impression and per-action (i.e. CPM and CPA), or per-click and per-action (i.e. CPC and CPA).", "publication_ref": ["b3", "b10", "b0", "b10", "b3", "b0", "b3", "b0", "b0"], "figure_ref": [], "table_ref": []}, {"heading": "The Hybrid Auction Scheme", "text": "As mentioned before, we will assume that there is a single slot that is being auctioned. There are n advertisers interested in a single keyword. When an advertiser j arrives at time t = 0, it submits a bid (m jt , c jt ) to the advertiser at time-slot t \u2265 1. The interpretation of this bid is that the advertiser is willing to pay at most m jt per impression or at most c jt per click. These values are possibly conditioned on the outcomes at the previous time slots. The auctioneer chooses a publicly known value 1 q jt which we term the auctioneer index, which can possibly depend on the outcomes for this advertiser at the previous time slots when its advertisement was shown, but is independent of all the bids.\nThe Hybrid auction scheme mimics VCG on the quantity R jt = max(m jt , c jt q jt ). We will call R jt the effective bid of user j at time t. Let j * denote the advertiser with highest R j value, and R \u2212j * denote the second highest R j . There are two cases. First, suppose m j * > c j * q j * , then j * gets the slot at per-impression price R \u2212j * . In the other case, j * gets the slot at per-click price R \u2212j * q j * . It is clear that the Hybrid scheme is feasible, since the per-impression price charged to j is at most m j , and the per-click price is at most c j . The auction generalizes in a natural way to multiple slots, but we will focus on the single slot case in this paper. If the auctioneer chooses q j,t to be an estimate of the click-through-rate (CTR) and the advertiser submits only a per-click bid, then this reduces to the traditional next-price auction currently in use.\nIn order to analyze properties of the Hybrid auction, we need to make modeling assumptions about the advertiser, about the auctioneer index q, and about time durations.", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Time Horizon and the Discount Factor", "text": "To model the time scale over which the auction is run, we assume there is a global discount factor \u03b3. Informally, this corresponds to the present value of revenue/profit/cost that will be realized in the next step, and is an essential parameter in determining the correct tradeoff between maximizing present expected reward (exploitation) vs. obtaining more information with a view towards improving future rewards (exploration). The expected revenue at time step t gets multiplied by a factor of \u03b3 t . Note that \u03b3 = 0 corresponds to optimizing for the current step (the myopic case). In the discussion below, we assume the auctioneer and advertiser behave strategically in optimizing their own revenues, and can compute parameters and bids based on their own discount factors which could be different from the global discount factor \u03b3 used for discussing social optimality.", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Auctioneer Model and the Gittins Index", "text": "For the purpose of designing an auctioneer index q jt , we assume the auctioneer starts with a prior distribution Q j on the CTR of advertiser j. We assume further that he announces this publicly, so that the advertiser is aware of this distribution. Therefore, the a priori expected value of the CTR of advertiser i from the point of view of the auctioneer is E[Q j ]. Suppose at some time instant t, T jt impressions have been offered to advertiser j, and n jt clicks have been observed. The natural posterior distribution Q jt for the advertiser is given by:\nPr[Q jt = x] \u221d x n jt (1 \u2212 x) T jt \u2212n jt \u2022 Pr[Q j = x];\nthis corresponds to Bayesian updates, and when initialized with the uniform continuous prior, corresponds to the natural Beta distribution, defined later. The auctioneer chooses a function f (Q jt ) that maps a posterior distribution Q jt to a q value.\nThe function f is chosen based on the revenue guarantees the auctioneer desires. We will use the following idealized scenario to illustrate a concrete choice of f ; our results apply broadly and are not limited to the scenario we describe. Suppose the auctioneer wishes to optimize over a time horizon given by discount factor \u03b3 a . Then, if the auctioneer were to ignore the per impression bids, and uses a first price auction on c j q jt assuming that c j is the true per-click valuation, then his choice of q jt should maximize his expected discounted revenue. Let v j denote the true per-click valuation of the advertiser. By assumption, v j = c j . At time t, the auctioneer offers the slot to the bidder j * with highest v j q jt at per-click price v j * , earning v j * E[Q jt ] in expectation. It is well-known that the discounted reward of this scheme is maximized when q jt is set to the Gittins index (described next) of Q jt with discount factor \u03b3 a , and hence setting f (Q jt ) = the Gittins index of Q j,t would be a natural choice.\nThe Gittins index [5,12] of a distribution Q for discount factor \u03b3 a is defined as follows: Consider a coin with this prior distribution on probability of heads Q, and that yields reward 1 on heads. The Gittins index is (1 \u2212 \u03b3)M , where M is the largest number satisfying the following condition: Some optimal discounted reward tossing policy that is allowed to retire at any time point and collect a retirement reward of M will toss the coin at least once. It is well-known that the Gittins index is at least the mean E[Q] of the prior, and for a given mean, the Gittins index increases with the variance of the prior, taking the lowest value equal to the mean only when the prior has zero variance. Further, the Gittins index also increases with the discount factor \u03b3 a , being equal to the mean when \u03b3 a = 0.\nAn equivalent definition will be useful: Consider a coin with the prior distribution on probability of heads Q j,t that yields reward 1 on heads. Suppose the coin is charged G amount whenever it is tossed, but is allowed to retire anytime. The Gittins index is the largest G for which the expected discounted difference between the reward from tossing minus the amount charged in the optimal tossing policy is non-negative 2 .\nTypically, the distribution Q is set to be the conjugate of the Bernoulli distribution, called the Beta distribution [5]. The distribution Beta(\u03b1, \u03b2) corresponds to starting with a uniform distribution over the CTR and observing \u03b1 \u2212 1 clicks in \u03b1 + \u03b2 \u2212 2 impressions. Therefore, if the initial prior is Beta(\u03b1, \u03b2), and n clicks are then observed in T impressions, the posterior distribution is Beta(\u03b1 + n, \u03b2 + T \u2212 n). Beta(1, 1) corresponds to the uniform distribution. Beta distributions are widely used mainly because they are easy to update. However, unless otherwise stated, our results will not depend on the distribution Q being a Beta distribution.", "publication_ref": ["b4", "b11", "b4"], "figure_ref": [], "table_ref": []}, {"heading": "Advertiser Model", "text": "The value bid by the advertisers will depend on their optimization criteria. The true per-click value of advertiser j is v j . The advertiser j maintains a time-indexed distribution P jt over the possible values of the actual CTR p that is updated whenever he receives an impression. We assume advertiser j's prior is updated based on the observed clicks in a fashion similar to the auctioneer's prior, but again, this is not essential to our results except where specifically mentioned.\nThe advertiser's bid will depend on its optimization criteria. In the next section, we consider the case where the advertisers only optimize their revenue at the current step, and could possibly take risk. In later sections, we consider the case where the advertisers attempt to optimize long-term revenue by bidding strategically over time.\nIn each case, the advertiser could be well-informed (or certain) about its CTR, so that P jt is a point distribution, or uninformed about its CTR, so that it trusts the auctioneer's prior, i.e., P jt = Q jt , or somewhere in between. Depending on the optimization criterion of the advertiser, these cases lead to different revenue properties for the auctioneer and advertiser, and show the advantages of the Hybrid scheme over pure per-click bidding as well as over per-impression bidding.", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Myopic Advertisers", "text": "In this section, we analyze single time-step properties of the auction. Specifically, we assume that the advertisers are myopic, meaning that they optimize some function of the revenue at the current time step.\nSince we consider myopic properties, we drop the subscript t denoting the time step from this section. The auctioneer's prior is therefore Q j , and the advertiser's prior is P j . Let p j = E[P j ].\nWe first show that when the advertisers are risk-neutral, then bidding (v j p j , v j ) is the dominant strategy, independent of the auctioneer's prior or the choice of f . Further, if the advertiser is certain about its CTR, and if this CTR is drawn from the auctioneer's prior which follows a Beta distribution, then the worst case loss in revenue of the auctioneer over pure per-click bidding is at most 1/e \u2248 37%. In contrast, the revenue-loss for the auctioneer when he uses the per-click scheme as opposed to the hybrid auction can approach 100% for a fairly natural scenario, one that corresponds to obscure keywords. We finally consider risk taking behavior of the advertisers when they are not certain about their CTR. We show that per-click bidding is dominant when the advertisers are risk-averse, but per-impression bidding is desirable when they are risk-seeking. Thus, the hybrid auction naturally extends the truthfulness of the single-slot per-click bidding auctions currently in use, results in bounded possible revenue loss but unbounded possible revenue gain, and naturally takes the risk posture of the advertiser into account; the precise qualitative conclusions are detailed in the introduction and the formal statements are proved below.\nThe result bounding the possible revenue loss of the auctioneer under the hybrid auction is for an arbitrary discount factor used by the auctioneer; the results about the possible revenue gain and the risk posture assume a myopic auctioneer. We believe these are the most appropriate assumptions, since we want to provide bounds on the revenue loss using hybrid auctions under the most general scenario, and want to illustrate the benefits of using the hybrid auction under natural, non-pathological scenarios.", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Truthfulness", "text": "We first show that the dominant strategy involves truthfully revealing the expected CTR, p j . Recall that the advertiser bids (m j , c j ). Further, the auctioneer computes an index q j based on the distribution Q j , and does VCG on the quantity R j = max(m j , c j q j ). Theorem 3.1 If p j = E[P j ] and the advertiser is myopic and risk-neutral, then regardless of the choice of q j , the (strongly) dominant strategy is to bid (v j p j , v j ).\nProof: First, consider the case where q j \u2264 p j . Suppose the advertiser bids (m j , c j ) and wins the auction. Then, the expected profit of this advertiser is at most p j v j \u2212min{R \u2212j * , R \u2212j * \u2022(p j /q j )} which is at most p j v j \u2212 R \u2212j * . Thus, the maximum profit of the advertiser can be at most max{0, p j v j \u2212 R \u2212j * } which is obtained by bidding (p j v j , v j ).\nNext, consider the case where q j > p j . Suppose the advertiser bids (m j , c j ) and wins the auction. Then, the expected profit of this advertiser is at most p j v j \u2212 min{R \u2212j * , R \u2212j * \u2022 (p j /q j )} which is at most p j v j \u2212 R \u2212j * \u2022 (p j /q j ). Thus, the maximum profit of the advertiser can be at most max{0, p j v j \u2212 R \u2212j * \u2022 (p j /q j )} which is again obtained by bidding (p j v j , v j ).\nThus, it is never suboptimal to bid truthfully. Let R * denote the second highest value of max(m j , c j q j ). In order to show that (p j v j , v j ) is a (strongly) dominant strategy, we need to show that for any other bid-pair (m j , c j ), there exist values of q j , R * such that the profit obtained by bidding (m j , c j ) is strictly less than that obtained by truthful bids. Suppose \u01eb is an arbitrary small but positive number. First consider the scenario where q j = p j , i.e., the auctioneer has a perfect prior. In this scenario, bidding (m j , c j ) with either m j > p j v j + \u01eb or c j > v j + \u01eb/p j results in a negative profit when p j v j < R * < p j v j + \u01eb; truthful bidding would have resulted in zero profit. Further, if m j < p j v j \u2212 \u01eb and c j < v j \u2212 \u01eb/p j , then the advertiser obtains zero profit in the case where p j v j > R * > p j v j \u2212 \u01eb; truthful bidding would have obtained positive profit.\nThis leaves the cases where m j = p j v j , c j < v j /(1 + \u01eb) or where m j < p j v j /(1 + \u01eb), c j = v j . In the former case, the advertiser obtains zero profit in the situation where q j > p j > q j /(1 + \u01eb) and R * = p j v j ; truthful bidding would have obtained positive profit. In the latter case, the advertiser obtains zero profit when q j < p j /(1+\u01eb) and R * = p j v j /(1+\u01eb); truthful bidding would have obtained positive profit.", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Well-Informed Advertisers: Loss in Auctioneer's Revenue", "text": "We now consider the case where the advertisers are certain about their CTR p j and risk-neutral; by the results of the previous section, we will assume that they bid truthfully. More formally, we assume the prior P j is the point distribution at p j . We suppose that the p j are drawn from the auctioneer's prior that is of the form Q j = Beta(\u03b1 j , \u03b2 j ). We now show that for q j being the Gittins index of Beta(\u03b1 j , \u03b2 j ) for any discount factor \u03b3 a , the expected revenue of the auctioneer at the current step is at least 1 \u2212 1/e times the revenue had he ignored the per-impression bids.\nTheorem 3.2 In the above mentioned scenario, the expected revenue of the auctioneer at the current step is at least 1 \u2212 1/e \u2248 63% of the corresponding auction that ignores the per-impression bid.\nProof: Let q j denote the Gittins index of Q j =Beta(\u03b1 j , \u03b2 j ). Let advertiser 1 have the highest v j q j , and advertiser 2 the next highest. Let R * = v 2 q 2 . If the per-impression bids are ignored, advertiser 1 gets the impression at a per-click price of v 2 q 2 /q 1 , so that the expected revenue is R * E[Q 1 ] q 1 . In the Hybrid scheme, v 1 q 1 and v 2 q 2 are both at least as large as R * . Hence, if the auctioneer makes a per-impression charge, then this charge must be at least R * per impression. If the advertiser makes a per-click charge (which must be to advertiser 1), then the expected revenue is at least R * Q 1 /q 1 . Hence the expected revenue of the Hybrid scheme is at least R * E min 1, Q 1 q 1 and the ratio of the revenue of the Hybrid scheme to the per-click scheme is at least\nE[min(q 1 ,Q 1 )] E[Q 1 ]\n. For p drawn from the distribution Q 1 , we now need to show that\nE[min(q 1 ,Q 1 )] E[Q 1 ] \u2265 1 \u2212 1/e.\nTo show this, observe that for a fixed Q 1 , this ratio is smallest when q 1 is as small as possible. This implies we should choose q 1 = E[Q 1 ] = \u03b1 \u03b1+\u03b2 , which corresponds to a discount factor of 0. Denote\n\u00b5 = E[Q 1 ].\nThen, the goal is to minimize the ratio 1 \u00b5 E[min(\u00b5, Q 1 )] as a function of \u03b1, \u03b2. Lemma 3.3 shows that this ratio is 1 \u2212 1/e, completing the proof.", "publication_ref": ["b0"], "figure_ref": [], "table_ref": []}, {"heading": "Lemma 3.3 If w is drawn from the Beta distribution with parameters", "text": "\u03b1, \u03b2 \u2265 1, and \u00b5 = \u03b1/(\u03b1 + \u03b2) is the mean of w, then E[min(\u00b5, w)] \u2265 \u00b5(1 \u2212 1/e).\nProof: We will allow \u03b1, \u03b2 to take on fractional values as long as they are both at least 1. Suppose \u03b1, \u03b2 are both strictly bigger than 1. Let z denote the random variable drawn from the Beta distribution with parameters\n\u03b1 \u2032 = \u03b1 \u2212 \u00b5\u03b8, \u03b2 \u2032 = \u03b2 \u2212 (1 \u2212 \u00b5)\u03b8,\nwhere \u03b8 > 0 is chosen such that \u03b1 \u2032 , \u03b2 \u2032 \u2265 1 and at least one of \u03b1 \u2032 , \u03b2 \u2032 is exactly 1. The mean of z is \u03b1\u2212\u00b5\u03b8 \u03b1+\u03b2\u2212\u03b8 = \u00b5, which is the same as the mean of w.\nLet f w , f z denote the probability density functions of w, z respectively, and let F w (x) (resp.\nF z (x)) denote Pr[w \u2265 x] (resp. Pr[z \u2265 x]). Consider the ratio r(x) = f w (x)/f z (x) = \u03c6x \u00b5\u03b8 (1 \u2212 x) (1\u2212\u00b5)\u03b8\n, where \u03c6 is the ratio of the corresponding normalizing terms and hence does not depend on x.\nObserve that r(x) is uni-modal (since the derivative of r is 0 exactly once in the interval [0, 1]); and that r(x) \u2192 0 as x \u2192 0 + and as x \u2192 1 \u2212 . Since both F w (x) and F z (x) are monotonically decreasing curves connecting (0, 1) and (1, 0), the above properties of r(x) = F \u2032 w (x) F \u2032 z (x) easily imply that for some s \u2208 (0, 1), over the interval x \u2208 [0, s], F w (x) \u2265 F z (x), and over x \u2208 [s, 1], F w (x) \u2264 F z (x). This combined with the fact that E[w] = E[z] = \u00b5 implies w Lorenz-dominates z, so that for all concave functions g, we have E[g(w)] \u2265 E[g(z)] [7].\nSince g(w) = min(w, y) is concave in w for fixed y, we have E[min(w, \u00b5)] \u2265 E[min(z, \u00b5)]. Therefore, it is sufficient to analyze E[min(\u00b5, z)]/\u00b5, i.e. the case where either \u03b1 or \u03b2 is exactly 1, and the other is at least 1. It is easy to explicitly verify both these cases, and show that the worst case is when \u03b1 = 1 and \u03b2 \u2192 \u221e when E[min(\u00b5, z)] = (1 \u2212 1/e)\u00b5.\nA Typical Case. Though the Hybrid scheme is not revenue dominant over the pure per-click scheme in pathological cases, the key advantage is in the following typical situation. There are n advertisers whose CTRs\np 1 \u2265 p 2 \u2265 \u2022 \u2022 \u2022 \u2265 p n are drawn from a common prior Q = Beta(1, K), whose mean is \u00b5 = O 1 K . Assume further that n = 4 K or K = log n 2 .\nWe have:\nPr[p 2 \u2265 1/2] \u2265 \uf8eb \uf8ec \uf8ed1 \u2212 \uf8eb \uf8ed 1 \u2212 2 log n 1 2 log n 2 \uf8f6 \uf8f8 n 2 \uf8f6 \uf8f7 \uf8f8 2 = 1 \u2212 1 \u2212 2 \u221a nlog n n 2 2 = 1 \u2212 o(1)\nRecall that the advertisers are aware of their CTR, but the auctioneer is only aware of the prior. Suppose the per-click value for all the advertisers is v, and these are truthfully revealed. In the per-click scheme, the auctioneer sells the impression to an arbitrary advertiser at per-click price v, and in expectation earns \u00b5v. If the auctioneer is myopic (\u03b3 a = 0), then q = E[Q] < p 2 w.h.p, and the Hybrid scheme charges per-impression. Here, the auctioneer sells to advertiser 1 at perimpression price vp 2 . From the above, E[p 2 ] = \u2126(1), so that E[p 2 ]/\u00b5 = \u2126(log n). Therefore, for n advertisers with diffuse priors of the form Beta 1, 1 log n , the auctioneer gains a factor \u2126(log n) in revenue. This is particular relevant for obscure keywords, where the auctioneer will have very diffuse priors.", "publication_ref": ["b6"], "figure_ref": [], "table_ref": []}, {"heading": "Uninformed Advertisers and Risk", "text": "So far, we have assumed that the advertiser is risk neutral and certain about the CTR, so that he is optimizing his expected profit. We now suppose that the advertiser is uncertain and trying to maximize a utility function U on his profit. The function U (x) is monotone with monotone derivative, and U (0) = 0. If U is convex, the advertiser is said to be risk-seeking, and if it is concave, the advertiser is said to be risk-averse. We show that for risk-averse advertisers, pure perclick bidding is dominant, whereas pure per-impression bidding is dominant when the advertisers are risk-seeking.\nIt is natural to assume that some advertisers may be either risk-averse or risk-seeking. Riskaversion models advertisers with tight budget constraints. Risk-seeking advertisers also occur naturally in many settings; one example is when advertisers are conducting experiments to identify high performance advertising channels and keywords. Finding a high reward keyword may result in a higher budget allocated to this keyword and more revenue in the future, making the present utility function of winning this ad slot appear convex at the present time.\nWe assume the advertisers are uninformed, which is equivalent to assuming the advertiser and the auctioneer share a common prior, so that P j = Q j . Essentially, the advertiser has no information and simply trusts the auctioneer's prior 3 . In this section, we focus on a single advertiser, and drop the subscript corresponding to it. Let p = E[P] = E[Q]. As mentioned earlier, we assume that the auctioneer is myopic as well (\u03b3 a = 0), so that q = E[Q] = p.\nLet (m, c) denote the advertiser's bid, and let v denote the true per-click valuation. Let I R be the indicator corresponding to whether the bidder gets the impression if R \u2212j = R. The bidding strategy of the advertiser will attempt to maximize:\nI R \u2022 max E [U (vP \u2212 R)] , E U vP \u2212 RP p\nIn the above expression, the first term is the expected profit if the impression is obtained based on the per-impression bid; and the latter term is the expected profit if the impression is obtained based on the per-click bid. Our next lemma captures the structure of the dominant strategy. \nE [U (vP \u2212 R)] \u2264 U (E [vP \u2212 R]) \u2264 U (0) = 0\nTherefore, if U is concave and vp < R, then bidding (0, v) is a dominant strategy. Since obtaining the impression based on the per-click bid does not yield positive profit, if U is convex, bidding (m, 0) with appropriately chosen m is a dominant strategy.\nThe next and most interesting case is when vp \u2265 R. Define random variable\nX = vP \u2212 R and Y = vP \u2212 RP p . First note that E[X] = E[Y ] = vp \u2212 R \u2265 0.\nFurther, the cumulative distribution functions (CDFs) of X and Y cross exactly once, with the CDF of X being initially larger than the CDF of Y . This is sufficient to show that Y Lorenz-dominates X. This implies that for U being concave, E[U (Y )] \u2265 E[U (X)] [7], so that the advertiser only bids per click. Further, if U is convex, E[U (X)] \u2265 E[U (Y )], so that the advertiser only bids per impression.\nOur main result in this sub-section is the following property which gives a single natural characterization of the optimum hybrid bid for both risk-averse and risk-seeking advertisers. We will then show that for risk-seeking advertisers (U is strictly increasing and convex), the expected myopic revenue of the auctioneer is larger in the Hybrid auction compared to the pure per-click auction, and for risk-averse advertisers, the Hybrid and per-click auctions coincide.\nTheorem 3.5 Let m * = max{y|E [U (vP \u2212 y)] \u2265 0}. Bidding (m * , v\n) is a dominant strategy. Further, the auctioneer's revenue in the Hybrid scheme dominates the revenue in the pure perclick scheme.\nProof: First consider the case when U is concave. Then, E [U (vP \u2212 p)] \u2264 U (E[vP \u2212 vp]) = 0. Therefore, m * \u2264 vp, so that bidding (m * , v) is equivalent to bidding (0, v), which is a dominant strategy.\nNext, when U is convex, we have m * \u2265 vp, so that bidding (m * , v) is equivalent to bidding (m * , 0). The previous lemma shows that the dominant strategy is of the form (m, 0). Since m * is the largest value of R \u2212j for which the advertiser makes a non-negative profit, bidding (m * , 0) must be the dominant strategy.\nThe auctioneer's revenue in the Hybrid scheme is the second largest value of max(m * j , v j p j ) while that in the per click scheme is the second largest value of v j p j , which cannot be larger.", "publication_ref": ["b2", "b6"], "figure_ref": [], "table_ref": []}, {"heading": "Semi-Myopic Advertisers", "text": "In this section, we remove the assumption that the advertisers are optimizing some function of the profit at the current step. We now generalize to the case where the advertisers optimize revenue over a time-horizon. We develop a tractable model for the advertisers, and show a simple dominant strategy for the advertisers, based on what we call the bidding index. Though this strategy does not have a closed form in general, we show that in many natural cases (detailed later) cases, it reduces to a natural pure per-click or pure per-impression strategy that is socially optimal. Thus, our hybrid auctions are flexible enough to allow the auctioneer and the advertiser to implement complex dynamic programming strategies collaboratively, under a wide range of scenarios. Neither per-impression nor per-click bidding can exhaustively mimic the bidding index in these natural scenarios.\nRecall that the true per-click value of advertiser j is v j , and that the advertiser j maintains a time-indexed distribution P jt over the possible values of the actual CTR p that is updated whenever he receives an impression. We assume advertiser j's prior is updated based on the observed clicks in a fashion similar to the auctioneer's prior, Q jt .\nWe assume the bidding strategy of the advertiser is semi-myopic, which we define as follows: The advertiser has a discount factor \u03b3 b . The bid of an advertiser j depends on its current state v j , P jt , Q jt , and on R \u2212j in a fashion described next. At every step, the value of R \u2212j is revealed. If the advertiser j got the impression the previous time step, the value of R \u2212j remains the same since the states of the other advertisers remains the same, else it changes adversarially. The optimization criterion of the advertiser is to maximize its discounted expected gain (using discount factor \u03b3 b ) in the contiguous time that it receives impressions (so that the value of R \u2212j remains the same). We make the reasonable assumption that the advertiser cannot optimize for a horizon beyond that, since the value of R \u2212j changes in an unknown fashion. Finally note that a myopic advertiser is equivalent to assuming \u03b3 b = 0.\nDiscussion. The semi-myopic model is closely related to the MDP approach of analyzing repeated auctions; see for instance [2,3]. These works make the assumption that the priors P j of the advertisers are public knowledge. However, this leads to somewhat perverse incentives in which the optimal strategy for an advertiser could be to underbid at the current time step in the hope that the priors of the other advertisers resolve to low values, and he then wins the auction on the remaining time steps at a lower price. However, note that if there are sufficiently many bidders, this scenario is unlikely to happen, and the bidder will attempt to win the auction at the current time slot. We make this explicit by making the following assumptions:\n1. The bidder j is aware of the revealed R \u2212j values of the other bidders, but may not be aware of their prior distributions, which are usually private information.\n2. The bidder only optimizes over the contiguous time horizon in which he receives the impressions. In this horizon, R \u2212j is fixed, and further, this removes the perverse incentive to under-bid described above.\nNote that in our model, the bidder is indeed aware of the current bids R \u2212j of the other bidders. However, unlike the model in [2,3], the optimization time-horizon of the bidder leads to the existence of a nicely specified dominant strategy. We hope that our modeling, that is only slightly more restrictive than ones considered in literature, but which have nice analytic properties, will be of independent interest in this and other contexts.", "publication_ref": ["b1", "b2", "b1", "b2"], "figure_ref": [], "table_ref": []}, {"heading": "The Dominant Bidding Index Strategy", "text": "We first show a bidding strategy that we term the bidding index strategy, and show that it is weakly dominant in the class of semi-myopic strategies. The bidding index B(v, P, Q) is defined as follows: Suppose the advertiser's current prior is P and the auctioneer's current prior is Q. Denote the current time instant as t = 0. Since the advertiser computes this index, we assume the advertiser trusts his own prior but not the auctioneer's. For a parameter W , define the following game between the advertiser and the auctioneer with discount factor \u03b3 b : At step t \u2265 0, suppose the advertiser has prior P t (with mean E[P t ] = p t ) and the auctioneer, Q t (with q t = f (Q t ) being the auctioneer's index), the advertiser can either stop the game, or continue. If he continues, he gains vp t in expectation and pays the auctioneer W min 1, pt qt ; the difference is his gain. The advertiser's value for the game is the expected discounted (according to \u03b3 b ) gain for the optimal strategy. Define W(v, P, Q) as the largest value of W for which the value of the game with initial priors P and Q, is positive. This value can easily be computed by dynamic programming, much like the Gittins index.\nThe bidding index B(v, P, Q) is defined as:\nB(v, P, Q) = W(v, P, Q) min 1, p 0 q 0\nThis is the largest per impression price at time t = 0 for which the value of the above game is positive.\nThe Strategy: At any time step, when the advertiser j's prior is P jt with mean p jt , and the auctioneer's prior is Q jt , with q jt = f (Q jt ), let W jt = W(v j , P jt , Q jt ) and B jt = B(v j , P jt , Q jt ). The bidding index strategy involves bidding (B jt , B jt p jt ). It is clear that the bidding index strategy is well-defined for q jt being an arbitrary function f (Q jt ) chosen by the auctioneer,and not just for f being the Gittins index of Q jt using discount factor \u03b3 a .", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Theorem 4.1 The bidding index strategy is (weakly) dominant in the class of semi-myopic strategies.", "text": "Proof: Consider a sequence of time steps when advertiser j gets the impression; call this a phase. During this time, the value R \u2212j used in the VCG scheme is fixed; denote this value R * . Suppose at a certain time step, the mean of the advertiser's prior is p jt and the auctioneer computes q jt . If the advertiser gets the impression, the price he is charged in the VCG scheme is either R * per impression or R * /q jt per click. The advertiser optimizes this by paying R * min(1, p jt /q jt ) in expectation per impression. The state evolution is only conditioned on getting the impression and not on the price paid for it.\nSince the advertiser's strategy is semi-myopic, at any time step, the bid should fetch him a non-negative expected profit for the rest of the phase. This implies that R * \u2264 W jt . There are two cases.\nFirst, if p jt < q jt , the advertiser essentially bids R jt = B jt q jt p jt = W jt \u2265 R * , and receives the impression at a per-click price of R * q jt . Therefore, the expected per impression price is R * p jt q jt = R * min 1, p jt q jt . Next, if p jt > q jt , the advertiser essentially bids R jt = B jt = W jt \u2265 R * , and receives the impression at a per-impression price of R * = R * min 1, p jt q jt . Therefore, the bidding scheme ensures that the advertiser receives the impression and makes the most possible profit in the rest of the phase. Note finally that if W jt < R * , the maximum possible profit in the rest of the phase is negative, and the bidding scheme ensures the advertiser does not receive the impression.", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Social Optimality of Bidding Index", "text": "Suppose the global discount factor is \u03b3. We define the socially optimal strategy as follows: Suppose at time t, advertiser j with prior P jt receives the impression resulting in value v j p jt for him. The socially optimal solution maximizes the infinite horizon expected discounted value with discount factor \u03b3.\nWe show that the bidding index strategy implements the socially optimal solution in each of the following two situations: (1) The advertiser and the auctioneer share the same prior (P jt = Q jt ), and either (1a) only the advertisers are strategic (\u03b3 a = 0 and \u03b3 b = \u03b3) or (1b) only the auctioneer is strategic (\u03b3 a = \u03b3 and \u03b3 b = 0); and (2) The advertisers are certain about their CTR (P j = p j ) and (2a) the auctioneer's index q jt is always at most p j . The bidding index also has a particularly simple form when the advertisers are certain, and (2b) the auctioneer's q j,t is monotonically decreasing with t and always larger than p j,t . In both (2a) and (2b), the bidding index strategy reduces to bidding (v j p j , v j ).\nThese scenarios are not arbitrarily chosen, and are the most illustrative scenarios we could find. Scenario (1) corresponds to an advertiser and an auctioneer that trust each other and hence have a common prior; in case (1a), the auctioneer merely discloses its current estimate and trusts the advertisers to bid in an optimal fashion, whereas in (1b) the advertisers delegate the strategic decision making to the auctioneer. In scenario 2, the advertisers have a definitive model of the CTR; in (2a), we model the case where the auctioneer starts with an underestimate of the clickthrough rate and hence the q j,t are always smaller than p j to which they will hopefully converge as this advertisement is shown more times and the auctioneer's prior gets sharpened, and in (2b) we model the mirror situation where the q j,t 's are always an over-estimate. It will be interesting to find a general theorem about the bidding index that unifies all these diverse scenarios.\nIn each of these cases, the bidding strategy can be implemented using either per-impression or per-click bidding or both, but neither per-impression nor per-click bidding can exhaustively mimic the bidding index in all scenarios. Shared Priors. When the advertisers are uncertain and simply share the auctioneer's prior, we have P jt = Q jt . Let G jt denote the Gittins index of P jt with discount factor \u03b3. The socially optimal solution always gives the impression to the advertiser with highest v j G jt at time t. Theorem 4.2 For shared priors, the bidding index strategy implements the socially optimal solution in the following two cases:\n1. The advertisers are strategic, i.e., \u03b3 b = \u03b3, and the auctioneer is myopic, i.e., \u03b3 a = 0.\n2. The advertisers are myopic, i.e., \u03b3 b = 0, and the auctioneer is strategic, i.e., \u03b3 a = \u03b3.\nProof: For the first part, we have q jt = p jt since \u03b3 a = 0. Therefore, min 1, p jt q jt = 1, so that the value W jt is the largest charge per impression so that the advertiser's discounted revenue is non-negative. This is precisely the definition of the Gittins index with discount factor \u03b3 b = \u03b3. Therefore, the bidding index strategy involves bidding (v j G jt , v j G jt p jt ). This can easily be seen to be equivalent to bidding either (v j G jt , 0) or (0, v j G jt p jt ), and hence can be mimiced with either pureimpression or pure-click bidding. Also, we have R jt = v j G jt , so that the bidding index implements the socially optimal strategy.\nFor the second part, since the advertiser is myopic, the bidding index reduces to bidding (v j p jt , v j ). Since \u03b3 a = \u03b3, we have q jt = G jt \u2265 p jt . Therefore, R jt = v j G jt , so that the bidding index implements the socially optimal solution; this can also be mimiced using per-click bidding but not per-impression bidding.\nWell -Informed Advertisers. We next consider the case where the advertisers are certain about their CTR p j , so that P jt = p j . The socially optimal solution always gives the impression to the advertiser with the largest v j p j . We show the following theorem: Theorem 4.3 When P jt = p j , then the bidding index strategy reduces to bidding (v j p j , v j ) in the following two scenarios:\n1. The auctioneer's q jt is always at most p j . In this case, the strategy is equivalent to bidding (v j p j , 0) and is socially optimal.\n2. The auctioneer's q jt is at least p j , and is monotonically decreasing with t.\nProof: When p j > q jt for all t, we have min 1, p j q jt = 1, so that the value W jt is the largest per-impression price for which the advertiser's discounted revenue is non-negative. This is precisely v j p j , so that the bidding index strategy reduces to bidding (v j p j , v j ). This is clearly socially optimal. Since q jt < p j , this is equivalent to bidding (v j p j , 0, but can not be simulated using per-click bids.\nWhen p j \u2264 q jt for all t and q jt is monotonically decreasing with t, the expected price W jt p j q jt charged to the advertiser increases with time. At any time t, the advertiser maximizes W jt by setting it to v j q jt and stopping after the first step. Therefore, W jt = v j q jt , and B jt = v j q jt p j q jt = v j p j . Therefore, the bidding index strategy reduces to bidding (v j p j , v j ); this is also equivalent to (0, v j ), but can not be simulated using per-impression bids.", "publication_ref": ["b0"], "figure_ref": [], "table_ref": []}, {"heading": "Exploration by Advertisers", "text": "We now show a simple bidding strategy for a certain (i.e. well-informed) advertiser to make the auctioneer's prior converge to the true CTR, while incurring no extra cost for the advertiser; perclick bidding would have resulted in the advertiser incurring a large cost. More concretely, this models the scenario where the advertiser has side information about the advertisement's CTR but the auctioneer does not have a good prior, for example, because the keyword may be obscure. The advertiser has incentive to help the auctioneer \"learn\" the true CTR because this improves the advertiser's chance of winning an ad slot in a pure per-click scheme.\nTo motivate why this is important, imagine a situation where the advertiser would not get the slot if the scheme were pure per-click, and he were to bid truthfully per-click, letting the auctioneer use his own estimate q j of the CTR. Therefore, in the pure per-click scheme, the advertiser has to overbid on the per-click valuation to get the slot enough number of times to make the CTR used by the auctioneer converge to the true value; we show that this results in loss in revenue for the advertiser. However, allowing for per impression bids preserves truthfulness, and furthermore, helps the auctioneer \"learn\" the true CTR, while incurring no revenue loss to the advertiser. This is our final argument in support of hybrid auctions, and may be the most convincing from an advertiser's point of view.\nFormally, we consider an advertiser that is certain about its CTR p j , where v j p j > R \u2212j so that the advertiser can (and would like to) win the auction but where q jt < p j , and where the goal of the advertiser is to make the auctioneer's prior converge to the true CTR. We show that the advertiser can achieve this goal without any loss in revenue, whereas achieving the same objective using per-click bidding would have resulted in a large revenue-loss. We assume the auctioneer's prior is a Beta distribution.\nWe show a candidate strategy for an advertiser to make the Gittins index of the auctioneer's distribution, Q jt = Beta(\u03b1 jt , \u03b2 jt ) converge close to its true CTR p j while incurring no loss in revenue. The loss is defined as the value earned from actual clicks minus the amount paid to the auctioneer.\nWe focus on a single advertiser and drop its subscript. For any \u01eb > 0, suppose the advertiser's strategy is as follows: During an \"explore\" phase, submit a bid of (vp \u2032 , v) where p \u2032 = p(1 \u2212 \u01eb), and then switch to bidding (0, v). During the explore phase, suppose the advertiser gets T impressions on a price per impression basis resulting in n clicks. Then the worst-case loss in revenue of the advertiser during the explore phase is v(T p \u2032 \u2212 n). The \"explore\" phase stops when the auctioneer's posterior mean of the distribution Beta(\u03b1 + n, \u03b2 + T \u2212 n) is at least p(1 \u2212 \u01eb). Note that this also implies that the Gittins index for Beta(\u03b1 + n, \u03b2 + T \u2212 n) is at least p(1 \u2212 \u01eb) irrespective of the discount factor \u03b3; this in turn implies that by switching to pure per-click bidding, the advertiser is assured that q \u2265 p(1 \u2212 \u01eb), so that bidding (0, v) yields R j \u2265 vp(1 \u2212 \u01eb). Claim 5.1 Suppose the advertiser knows its true CTR is p, and the auctioneer's initial prior is Beta(\u03b1, \u03b2). For any \u01eb > 0, the explore phase incurs no loss in revenue for the advertiser.\nProof: Let T denote the random stopping time of the explore phase and suppose it results in N clicks. First note that if T > 0, then p(1 \u2212 \u01eb) > \u03b1 \u03b1+\u03b2 . The posterior mean on stopping is \u03b1+N \u03b1+\u03b2+T \u2265 p(1 \u2212 \u01eb), which implies N/T > p(1 \u2212 \u01eb). Therefore, T p(1 \u2212 \u01eb) \u2212 N < 0, which shows there is no loss in revenue (provided T is finite with probability 1, which follows from the law of large numbers in this case).\nSuppose R \u2212j = v j p j (1\u2212 \u01eb). In a pure per-click bidding scheme, the advertiser would have to bid at least v j (1\u2212\u01eb)p j /q jt at time t < T with an expected loss (i.e. profit \u2212 cost) of p j v j ((1\u2212\u01eb)p j /q jt \u22121). For a myopic auctioneer with initial prior (1, \u03b2), the total loss of revenue for the advertiser till time T is \u2126(v j p j \u03b2) which can be arbitrarily large.", "publication_ref": [], "figure_ref": [], "table_ref": []}, {"heading": "Multi-Slot Auction", "text": "In this section, we generalize the hybrid auction to multiple slots under the standard separable CTR assumption, such that the resulting generalization is truthful in a myopic setting analogous to Section 3. Assume there are K slots, where slot i is associated with a CTR multiplier \u03b8 i \u2208 [0, 1]. Slot 1 is the topmost slot; since the CTRs decrease with slot number, we have 1 = \u03b8 1 \u2265 \u03b8 2 \u2265 \u2022 \u2022 \u2022 \u2265 \u03b8 K \u2265 0. We will also define \u03b8 K+1 = 0.\nAs before, advertiser j and the auctioneer maintain priors on the CTR value for this advertiser in ad slot 1. As before, we denote these priors as P j and Q j respectively. Let p j = E[P j ] be the expected CTR estimated by the advertiser, and let q j = f (Q j ) denote the Gittins index (or for that matter, any other function) of the auctioneer's prior. Let v j denote the true per-click valuation of advertiser j. Note that the priors P j and Q j correspond to the estimated CTR for advertiser j in the first ad slot, so that the expected CTR for the i th slot based on the advertiser's estimate is \u03b8 i p j .\nAdvertiser j bids (m j , c j ), which is interpreted as the per-impression and per-click bids for obtaining the first slot. The auction is modeled after the laddered auction in [1], which is equivalent to VCG under the separability assumption [4]. First, compute the effective bid R j = max{m j , c j q j } for every advertiser as described in section 2. Assume without loss of generality that there are K +1 advertisers, and that R 1 \u2265 R 2 \u2265 . . . \u2265 R K+1 . Then, the auction proceeds as follows:\n1. Advertiser j is placed in slot j, for 1 \u2264 j \u2264 K.\n2. An \"effective charge\", e j is computed for advertiser j as e j = K i=j \u03b8 i \u2212\u03b8 i+1 \u03b8 j R i+1 .\n3. If m j > c j q j then the advertiser is charged e j per impression; else it is charged e j /q j per click.\nIt is easy to see that e j \u03b8 j = R j (\u03b8 j \u2212 \u03b8 j+1 ) + e j+1 \u03b8 j+1 . Informally, advertiser j's effective charge is the same as the effective bid of the (j + 1)-th advertiser for the additional click-rate at the j-th position, and the same as the effective charge of the (j + 1)-th advertiser for the click-rate that would have already been realized at the (j + 1)-th position. Theorem 6.1 If p j = E[P j ] and the advertiser is myopic and risk-neutral, then regardless of the choice of q j , the (strongly) dominant strategy is to bid (v j p j , v j ).\nThe proof of the above theorem is obtained by extending the proof of theorem 3.1 exactly along the line of the proof of truthfulness of the laddered auction in [1], and is omitted from this version. This proof can also be obtained using the analysis of VCG with probabilistic allocations, due to Myerson [9].", "publication_ref": ["b0", "b3", "b0", "b8"], "figure_ref": [], "table_ref": []}, {"heading": "Conclusion", "text": "Advertising is a major source of revenue for search engines and other web-sites, and a major driver of innovation in web technology and services. Advertising spots are typically sold on the web using auctions, and these auctions have typically been either Cost-Per-Click (CPC), Cost-Per-Impression (CPM), or Cost-Per-Action (CPA). We defined a single-slot hybrid auction, which allows advertisers to enter per-impression as well as per-click bids. We showed that this auction is truthful for risk-neutral, myopic advertisers, the setting under which such auctions have typically been analyzed. When advertisers are risk-seeking, or non-myopic, or when the advertiser has much better information about the Click-Through-Rate (CTR) than the auctioneer, we show that the hybrid auction offers stronger revenue guarantees and advertiser flexibility than either pure CPC or CPM. The hybrid auction generalizes naturally to multi-slot scenarios and is equally applicable to (CPM,CPA) or (CPC,CPA) bidding. Finally, the hybrid auction is fully backwards compatible with a CPC auction, in the sense that advertisers entering (optional) per-impression bids in addition to per-click bids can seamlessly co-exist with advertisers entering only per-click bids in the same auction.", "publication_ref": [], "figure_ref": [], "table_ref": []}], "references": [{"ref_id": "b0", "title": "Truthful auctions for pricing search keywords. Proceedings of the seventh", "journal": "ACM conference on Electronic Commerce", "year": "2006-06", "authors": "G Aggarwal; A Goel; R Motwani"}, {"ref_id": "b1", "title": "An efficient dynamic mechanism", "journal": "", "year": "2007", "authors": "S Athey; I Segal"}, {"ref_id": "b2", "title": "Efficient dynamic allocation with uncertain valuation", "journal": "", "year": "2005", "authors": "A Bapna; T Weber"}, {"ref_id": "b3", "title": "Internet advertising and the generalized second price auction: Selling billions of dollars worth of keywords", "journal": "American Economic Review", "year": "2007", "authors": "B Edelman; M Ostrovsky; M Schwarz"}, {"ref_id": "b4", "title": "Bandit processes and dynamic allocation indices", "journal": "J Royal Statistical Societe Series B", "year": "1979", "authors": "J C Gittins"}, {"ref_id": "b5", "title": "Sponsored search auctions", "journal": "", "year": "2007", "authors": "S Lahaie; D Pennock; A Saberi; R Vohra"}, {"ref_id": "b6", "title": "Inequalities: theory of majorization and its applications", "journal": "Mathematics in Science and Engineering)", "year": "1979", "authors": "A W Marshall; I Olkin"}, {"ref_id": "b7", "title": "Adwords and generalized online matching", "journal": "", "year": "2005", "authors": "A Mehta; A Saberi; U Vazirani; V Vazirani"}, {"ref_id": "b8", "title": "Optimal auction design", "journal": "Mathematics of Operations Research", "year": "1981", "authors": "R B Myerson"}, {"ref_id": "b9", "title": "Predicting clicks: estimating the click-through rate for new ads", "journal": "", "year": "2007", "authors": "M Richardson; E Dominowska; R Ragno"}, {"ref_id": "b10", "title": "Position auctions", "journal": "International Journal of Industrial Organization", "year": "2006-10", "authors": "H Varian"}, {"ref_id": "b11", "title": "On the gittins index for multiarmed bandits", "journal": "Annals of applied probability", "year": "1992", "authors": "R Weber"}], "figures": [{"figure_label": "34", "figure_type": "figure", "figure_id": "fig_0", "figure_caption": "Lemma 3 . 434If U is concave, bidding (0, v) is a dominant strategy. If U is convex, the dominant strategy is of the form (m, 0) for a suitably chosen m.Proof: First consider the case when vp < R. In this case, regardless of U , E U vP \u2212 RP p \u2264 0. Therefore, to obtain positive profit, the bidder has to obtain the impression based on his perimpression bid. In this case, the expected profit is E [U (vP \u2212 R)]. Note that E[vP \u2212 R] < 0. Therefore if g is concave:", "figure_data": ""}], "formulas": [{"formula_id": "formula_0", "formula_text": "Pr[Q jt = x] \u221d x n jt (1 \u2212 x) T jt \u2212n jt \u2022 Pr[Q j = x];", "formula_coordinates": [5.0, 198.48, 539.66, 214.94, 20.65]}, {"formula_id": "formula_1", "formula_text": "E[min(q 1 ,Q 1 )] E[Q 1 ]", "formula_coordinates": [8.0, 444.24, 512.06, 53.11, 17.52]}, {"formula_id": "formula_2", "formula_text": "E[min(q 1 ,Q 1 )] E[Q 1 ] \u2265 1 \u2212 1/e.", "formula_coordinates": [8.0, 411.84, 530.18, 109.1, 21.85]}, {"formula_id": "formula_3", "formula_text": "\u00b5 = E[Q 1 ].", "formula_coordinates": [8.0, 72.0, 576.22, 52.1, 11.85]}, {"formula_id": "formula_4", "formula_text": "\u03b1, \u03b2 \u2265 1, and \u00b5 = \u03b1/(\u03b1 + \u03b2) is the mean of w, then E[min(\u00b5, w)] \u2265 \u00b5(1 \u2212 1/e).", "formula_coordinates": [8.0, 72.0, 615.22, 467.91, 32.21]}, {"formula_id": "formula_5", "formula_text": "\u03b1 \u2032 = \u03b1 \u2212 \u00b5\u03b8, \u03b2 \u2032 = \u03b2 \u2212 (1 \u2212 \u00b5)\u03b8,", "formula_coordinates": [8.0, 215.64, 679.95, 160.82, 20.04]}, {"formula_id": "formula_6", "formula_text": "F z (x)) denote Pr[w \u2265 x] (resp. Pr[z \u2265 x]). Consider the ratio r(x) = f w (x)/f z (x) = \u03c6x \u00b5\u03b8 (1 \u2212 x) (1\u2212\u00b5)\u03b8", "formula_coordinates": [9.0, 72.0, 114.02, 467.96, 25.87]}, {"formula_id": "formula_7", "formula_text": "p 1 \u2265 p 2 \u2265 \u2022 \u2022 \u2022 \u2265 p n are drawn from a common prior Q = Beta(1, K), whose mean is \u00b5 = O 1 K . Assume further that n = 4 K or K = log n 2 .", "formula_coordinates": [9.0, 72.0, 327.7, 468.02, 29.37]}, {"formula_id": "formula_8", "formula_text": "Pr[p 2 \u2265 1/2] \u2265 \uf8eb \uf8ec \uf8ed1 \u2212 \uf8eb \uf8ed 1 \u2212 2 log n 1 2 log n 2 \uf8f6 \uf8f8 n 2 \uf8f6 \uf8f7 \uf8f8 2 = 1 \u2212 1 \u2212 2 \u221a nlog n n 2 2 = 1 \u2212 o(1)", "formula_coordinates": [9.0, 185.4, 368.66, 238.95, 103.21]}, {"formula_id": "formula_9", "formula_text": "I R \u2022 max E [U (vP \u2212 R)] , E U vP \u2212 RP p", "formula_coordinates": [10.0, 192.84, 313.54, 204.38, 26.09]}, {"formula_id": "formula_10", "formula_text": "E [U (vP \u2212 R)] \u2264 U (E [vP \u2212 R]) \u2264 U (0) = 0", "formula_coordinates": [10.0, 199.2, 493.66, 213.53, 18.65]}, {"formula_id": "formula_11", "formula_text": "X = vP \u2212 R and Y = vP \u2212 RP p . First note that E[X] = E[Y ] = vp \u2212 R \u2265 0.", "formula_coordinates": [10.0, 72.0, 557.02, 468.05, 32.21]}, {"formula_id": "formula_12", "formula_text": "Theorem 3.5 Let m * = max{y|E [U (vP \u2212 y)] \u2265 0}. Bidding (m * , v", "formula_coordinates": [11.0, 72.0, 121.47, 344.3, 20.04]}, {"formula_id": "formula_13", "formula_text": "B(v, P, Q) = W(v, P, Q) min 1, p 0 q 0", "formula_coordinates": [12.0, 218.16, 546.1, 166.71, 26.73]}], "doi": ""}